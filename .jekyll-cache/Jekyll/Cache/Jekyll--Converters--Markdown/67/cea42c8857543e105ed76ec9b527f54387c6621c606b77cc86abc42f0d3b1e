I"Ô<h3 id="ç›¸å…³é“¾æ¥">ç›¸å…³é“¾æ¥</h3>

<p>Apple document:</p>

<p><a href="https://developer.apple.com/documentation/security/password_autofill/about_the_password_autofill_workflow">password_autofill/about_the_password_autofill_workflow</a></p>

<p>Video:</p>

<p><a href="https://developer.apple.com/videos/play/wwdc2017/206/">wwdc2017/206</a></p>

<p>å¤§ç±»åŒºåˆ†ä¸ºç”¨æˆ·åå¯†ç ï¼ˆPasswordï¼‰å’Œå…¶ä»–ç±»å‹ï¼ˆName, Phone, Address, Email, 2FACodeâ€¦ï¼‰çš„ AutoFillã€‚</p>

<p>æ€»ä½“æ¥è¯´ï¼ŒåŸºç¡€ç‰ˆæœ¬çš„ auto-fill æ˜¯è¢« iOS system è‡ªåŠ¨å‘ç°çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ å¯ä»¥æ— éœ€é€‚é…ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½ã€‚</p>

<p>ä½†æ˜¯ï¼Œä¸ºäº†è®©ç”¨æˆ·èƒ½å¤Ÿè‡ªåŠ¨å¡«å…¥ä¸å½“å‰ app ç›¸åŒ¹é…çš„ç”¨æˆ·å¯†ç ï¼Œä½ å¯ä»¥å°† app bundle id ç»‘å®šã€‚</p>

<h3 id="password">Password</h3>

<h4 id="é»˜è®¤æä¾›çš„">é»˜è®¤æä¾›çš„</h4>

<p>å¦‚æœæœ‰ä¸¤ä¸ªä»¥ä¸Šè¾“å…¥æ¡†ï¼ˆå’Œä¸€ä¸ªç¡®å®šæŒ‰é’®ï¼‰ï¼Œåœ¨æŸä¸€ä¸ªè¾“å…¥æ¡†ä¸º Secure çš„æ—¶å€™ï¼Œå®ƒå’Œä¸Šè¾¹çš„é‚£ä¸ªè¾“å…¥æ¡†å³å¯è¢«è‡ªåŠ¨å¡«å…¥ç”¨æˆ·å¯†ç ã€‚</p>

<p>Demo æ¯”è¾ƒç®€å•ï¼Œå¯ä»¥æƒ³è±¡ä¸€ä¸‹æ‹– Storyboardï¼Œå‡ ä¸ª Textfield å³å¯éªŒè¯ã€‚</p>

<h4 id="åŸºäº-associated-domain">åŸºäº Associated Domain</h4>

<h5 id="app">App</h5>

<p>åƒæ·»åŠ  Universal link ä¸€æ ·ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ  webcredentials æ¥ç»™åº”ç”¨æŒ‡å®š domainã€‚</p>

<p>Project -&gt; Capabilities -&gt; Associated Domains</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>links::example.com
webcredentials:example.com
</code></pre></div></div>

<h5 id="server">Server</h5>

<p>é…ç½® apple-app-site-association</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
   "webcredentials": {
       "apps": [    "AppPrefix.com.example.DemoApp",
                    "AppPrefix.com.example.DemoAdminApp" ]
    }
}
</code></pre></div></div>
<h4 id="keychain-sharing">Keychain Sharing</h4>

<p>è¿™ä¸ªæ˜¯å½“ä¸€ä¸ª Apple è´¦å·å‘å¸ƒäº†å¤šä¸ªåº”ç”¨ç¨‹åºï¼Œ é‚£ä¹ˆåˆ›å»ºä¸€ä¸ªç»„ï¼Œå¯ä»¥è®©è¿™å¤šä¸ªåº”ç”¨å…±äº«ç”¨æˆ·ä¿¡æ¯ã€‚åœ¨è®¾ç½®ä¸­å¡«å…¥è¦å…±äº«çš„åº”ç”¨çš„ Bundle Identifier å³å¯ã€‚</p>

<p>Project -&gt; Capabilities -&gt; Keychain Sharing</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>com.example.DemoApp
com.example.DemoAdminApp
</code></pre></div></div>

<h3 id="å…¶ä»–ç±»å‹çš„è¾“å…¥æ¡†">å…¶ä»–ç±»å‹çš„è¾“å…¥æ¡†</h3>

<p>å½“ä¸€ä¸ªè¾“å…¥æ¡†è¢«è®¾ç½®äº† content typeï¼Œé‚£ä¹ˆå°±çŸ¥é“äº†è¿™ä¸ªè¾“å…¥æ¡†çš„ç±»å‹ï¼ŒiOS å°±å¯ä»¥æä¾›ç›¸åº”çš„å¿«é€Ÿé”®å…¥é€‰é¡¹ã€‚</p>

<p>API:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// The textContentType property is to provide the keyboard with extra information about the semantic intent of the text document.
@available(iOS 10.0, *)
optional var textContentType: UITextContentType! { get set } // default is nil
</code></pre></div></div>

<p>Content:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>extension UITextContentType {


    @available(iOS 10.0, *)
    public static let name: UITextContentType

    @available(iOS 10.0, *)
    public static let namePrefix: UITextContentType

    @available(iOS 10.0, *)
    public static let givenName: UITextContentType

    @available(iOS 10.0, *)
    public static let middleName: UITextContentType

    @available(iOS 10.0, *)
    public static let familyName: UITextContentType

    @available(iOS 10.0, *)
    public static let nameSuffix: UITextContentType

    @available(iOS 10.0, *)
    public static let nickname: UITextContentType

    @available(iOS 10.0, *)
    public static let jobTitle: UITextContentType

    @available(iOS 10.0, *)
    public static let organizationName: UITextContentType

    @available(iOS 10.0, *)
    public static let location: UITextContentType

    @available(iOS 10.0, *)
    public static let fullStreetAddress: UITextContentType

    @available(iOS 10.0, *)
    public static let streetAddressLine1: UITextContentType

    @available(iOS 10.0, *)
    public static let streetAddressLine2: UITextContentType

    @available(iOS 10.0, *)
    public static let addressCity: UITextContentType

    @available(iOS 10.0, *)
    public static let addressState: UITextContentType

    @available(iOS 10.0, *)
    public static let addressCityAndState: UITextContentType

    @available(iOS 10.0, *)
    public static let sublocality: UITextContentType

    @available(iOS 10.0, *)
    public static let countryName: UITextContentType

    @available(iOS 10.0, *)
    public static let postalCode: UITextContentType

    @available(iOS 10.0, *)
    public static let telephoneNumber: UITextContentType

    @available(iOS 10.0, *)
    public static let emailAddress: UITextContentType

    @available(iOS 10.0, *)
    public static let URL: UITextContentType

    @available(iOS 10.0, *)
    public static let creditCardNumber: UITextContentType

    @available(iOS 11.0, *)
    public static let username: UITextContentType

    @available(iOS 11.0, *)
    public static let password: UITextContentType

    @available(iOS 12.0, *)
    public static let newPassword: UITextContentType

    @available(iOS 12.0, *)
    public static let oneTimeCode: UITextContentType
}

</code></pre></div></div>

<blockquote>
  <p>FYI: TWO-FACTOR AUTHENTICATION (2FA)</p>
</blockquote>

<h3 id="åŸç†å·¥ä½œæµç¨‹">åŸç†ï¼ˆå·¥ä½œæµç¨‹ï¼‰</h3>

<h4 id="åº”ç”¨ç”Ÿå‘½å‘¨æœŸ">åº”ç”¨ç”Ÿå‘½å‘¨æœŸ</h4>

<p>å½“ç”¨æˆ·ç‚¹å‡»äº† QuickType Bar ä¹‹åï¼Œç³»ç»Ÿä¼šéªŒè¯ Face IDï¼ˆæˆ–è€…å…¶ä»–ï¼‰ï¼Œ<code class="language-plaintext highlighter-rouge">applicationWillResignActive(_:)</code>ï¼Œ ç„¶åéªŒè¯å®Œæˆ<code class="language-plaintext highlighter-rouge">applicationDidBecomeActive(_:)</code>ã€‚</p>

<p>åœ¨åº”ç”¨ç¦»å¼€å“åº”çš„æ—¶å€™ï¼Œä¸è¦åš <code class="language-plaintext highlighter-rouge">dismiss</code>, <code class="language-plaintext highlighter-rouge">pop</code> æˆ–è€… <code class="language-plaintext highlighter-rouge">TF removeFromSuperView</code>ï¼Œè¿™äº›éƒ½ä¼šå¯¼è‡´è‡ªå·±å¡«å…¥å¤±è´¥ã€‚ æ‰€ä»¥è¦æ³¨æ„ä¸€ä¸‹åº”ç”¨è’™æ¿ï¼Œè‡ªåŠ¨é€€å‡ºç­‰ç‰¹æ®Šæƒ…å†µã€‚</p>

<h4 id="textfield-ç”Ÿå‘½å‘¨æœŸ">Textfield ç”Ÿå‘½å‘¨æœŸ</h4>

<p>ç³»ç»Ÿä¼šå‘é€ <code class="language-plaintext highlighter-rouge">textDidChangeNotification</code> å½“è¢«æ›´æ–°ã€‚å¯¹åº”åˆ°ä¸åŒçš„è¾“å…¥æ¡†ç¨å¾®æœ‰ç‚¹å·®åˆ«ï¼š</p>

<ul>
  <li>
    <p>UITextField: UITextFieldDelegate <code class="language-plaintext highlighter-rouge">textField(_:shouldChangeCharactersIn:replacementString:)</code></p>
  </li>
  <li>
    <p>UITextView: UITextViewDelegate <code class="language-plaintext highlighter-rouge">textView(_:shouldChangeTextIn:replacementText:)</code></p>
  </li>
  <li>
    <p>è‡ªå®šä¹‰çš„ç»§æ‰¿äº UITextInput protocol çš„: <code class="language-plaintext highlighter-rouge">insertText(_:)</code> æˆ–è€… <code class="language-plaintext highlighter-rouge">replace(_:withText:)</code></p>
  </li>
</ul>

<h3 id="æ€»ç»“">æ€»ç»“</h3>

<p>åŸºäºè¿™ä¸€å¥—ï¼Œå¯ä»¥åœ¨ä¸ä¿®æ”¹ä»£ç ï¼Œæˆ–è€…å°‘é‡ä¿®æ”¹ä»£ç çš„æ—¶å€™ï¼Œç»™ç”¨æˆ·æä¾›æ›´å¤šçš„ä¾¿åˆ©ã€‚</p>

<p>åœ¨ Password æ–¹é¢ï¼Œè¿˜æœ‰ä¸€äº›ä¸‰æ–¹çš„ï¼Œä¾‹å¦‚ 1-Password ç­‰ï¼Œè™½ç„¶ä¾›åº”å•†ä¸åŒï¼Œä½†æ˜¯åˆ° App å†…éƒ¨ä»£ç å¤„ç†ä¸Šï¼Œå·²ç»è¢«åè®®åŒ–äº†ï¼Œå¯ä»¥æ–¹ä¾¿çš„ä½¿ç”¨è€Œä¸ä½œä¿®æ”¹ï½</p>
:ET