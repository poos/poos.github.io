I"ü‡<blockquote>
  <p>HuaRongDao</p>
</blockquote>

<p><strong>é¡¹ç›®åœ°å€ï¼š<a href="https://gitee.com/poos/HuaRongDao">ShownBie/HuaRongDaoSwift</a></strong></p>

<p>æœ¬æ–‡ä»‹ç»åå®¹é“çš„æœç´¢ç®—æ³•çš„æ„å»ºå’Œå®ç°ã€‚</p>

<h3 id="åè®®">åè®®</h3>

<p>ä½¿ç”¨åè®®å¯ä»¥è®©ä»£ç çœ‹èµ·æ¥æ›´è°ƒç†ï¼Œæ›´åŠ æœ‰æ¡†æ¶ã€‚è€Œä¸”å¯ä»¥å°†æ¡†æ¶éƒ¨åˆ†ç®€å•çš„åº”ç”¨äºå…¶ä»–æœç´¢æœç´¢æ¸¸æˆã€‚</p>

<p>é€šè¿‡åˆ¶å®šé€šç”¨çš„æœç´¢åè®®ï¼Œå¯ä»¥å°†æœç´¢çš„ç®—æ³•è§„èŒƒåŒ–ï¼šæŸä¸ªçŠ¶æ€ï¼ˆåŒ…å«çˆ¶èŠ‚ç‚¹ï¼‰ï¼ŒçŠ¶æ€æƒé‡ï¼Œæœç´¢å™¨</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre></td><td class="rouge-code"><pre><span class="c1">//æŸä¸ªçŠ¶æ€</span>
<span class="kd">protocol</span> <span class="kt">SXNodeState</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">parentState</span><span class="p">:</span> <span class="kt">SXNodeState</span><span class="p">?</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="k">var</span> <span class="nv">data</span><span class="p">:</span> <span class="p">[</span><span class="kt">Int</span><span class="p">]</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="k">var</span> <span class="nv">identifier</span><span class="p">:</span> <span class="kt">Int64</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">childeStates</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">SXNodeState</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1">//æŸä¸ªçŠ¶æ€çš„æƒé‡ æš‚æœªä½¿ç”¨</span>
<span class="kd">protocol</span> <span class="kt">SXAStarState</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">fromValue</span><span class="p">:</span> <span class="kt">Int</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="k">var</span> <span class="nv">toValue</span><span class="p">:</span> <span class="kt">Int</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="k">var</span> <span class="nv">totalValue</span><span class="p">:</span> <span class="kt">Int</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">toTargetStatus</span><span class="p">(</span><span class="n">_</span> <span class="nv">from</span><span class="p">:</span> <span class="kt">SXNodeState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Int</span>
<span class="p">}</span>

<span class="c1">//æœç´¢å™¨</span>
<span class="kd">protocol</span> <span class="kt">SXSeacher</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">startState</span><span class="p">:</span> <span class="kt">SXNodeState</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="k">var</span> <span class="nv">targetState</span><span class="p">:</span> <span class="kt">SXNodeState</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="k">var</span> <span class="nv">successComparator</span><span class="p">:</span> <span class="p">(</span><span class="kt">SXNodeState</span><span class="p">,</span> <span class="kt">SXNodeState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">search</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Bool</span>

    <span class="kd">func</span> <span class="nf">pathWithState</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">SXNodeState</span><span class="p">]</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="å¤šå‰æ ‘">å¤šå‰æ ‘</h3>

<p>æœç´¢ç®—æ³•é€šå¸¸ä»¥ä¸€ç§ <strong>å¤šå‰æ ‘</strong> çš„å½¢å¼å­˜åœ¨ï¼Œæ ‘çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹å¦‚ä¸‹ï¼š<strong>çˆ¶</strong> èŠ‚ç‚¹ï¼Œ<strong>å­©å­ä»¬</strong> èŠ‚ç‚¹ï¼Œå½“å‰çš„ <strong>å€¼</strong>ï¼Œ <strong>å”¯ä¸€æ ‡è¯†</strong>ï¼ˆç”¨äºæŸ¥è¯¢å½“å‰èŠ‚ç‚¹æ˜¯å¦è¢«æŸ¥è¯¢è¿‡ï¼‰</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="kd">protocol</span> <span class="kt">SXNodeState</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">parentState</span><span class="p">:</span> <span class="kt">SXNodeState</span><span class="p">?</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="k">var</span> <span class="nv">data</span><span class="p">:</span> <span class="p">[</span><span class="kt">Int</span><span class="p">]</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="k">var</span> <span class="nv">identifier</span><span class="p">:</span> <span class="kt">Int64</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">childeStates</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">SXNodeState</span><span class="p">]</span>
<span class="p">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="æƒé‡">æƒé‡</h3>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="kd">protocol</span> <span class="kt">SXAStarState</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">fromValue</span><span class="p">:</span> <span class="kt">Int</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="k">var</span> <span class="nv">toValue</span><span class="p">:</span> <span class="kt">Int</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="k">var</span> <span class="nv">totalValue</span><span class="p">:</span> <span class="kt">Int</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">toTargetStatus</span><span class="p">(</span><span class="n">_</span> <span class="nv">from</span><span class="p">:</span> <span class="kt">SXNodeState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Int</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>A* ç®—æ³•çš„å¿…å¤‡è¦ç´ ï¼Œæ ¹æ®ä¸åŒçš„è§„åˆ™å¤§æ¦‚å¯ä»¥åˆ†ä¸ºå‡ ä¸ªå€¼ï¼š<strong>åˆ°å¼€å§‹çš„æƒé‡</strong>ï¼Œ<strong>åˆ°æˆåŠŸçŠ¶æ€çš„æƒé‡</strong>ï¼Œ<strong>æ€»æƒé‡</strong>ã€‚éœ€è¦ä¼ å…¥å¼€å§‹ç‚¹ï¼Œç»“æŸç‚¹å’Œå½“å‰ç‚¹</p>

<h3 id="æœç´¢ç±»">æœç´¢ç±»</h3>

<p>æœç´¢ç±»ç»§æ‰¿ <strong>æœç´¢åè®®</strong>ï¼Œ ç„¶åæ·»åŠ å‡ ä¸ªç§æœ‰å˜é‡ç”¨äºè®¡ç®—å­˜å‚¨å³å¯ã€‚</p>

<p>å¦‚ä¸‹æ·»åŠ äº†å±æ€§ pathStatesï¼ŒhistoryIdentifierï¼ŒsucccesState å’Œ æ–¹æ³• getChild()</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="kt">HuaSearch</span><span class="p">:</span> <span class="kt">SXSeacher</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">startState</span><span class="p">:</span> <span class="kt">SXNodeState</span>

    <span class="k">var</span> <span class="nv">targetState</span><span class="p">:</span> <span class="kt">SXNodeState</span>

    <span class="k">var</span> <span class="nv">successComparator</span><span class="p">:</span> <span class="p">(</span><span class="kt">SXNodeState</span><span class="p">,</span> <span class="kt">SXNodeState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span>

    <span class="nf">init</span><span class="p">(</span><span class="nv">start</span><span class="p">:</span> <span class="kt">SXNodeState</span><span class="p">,</span> <span class="nv">target</span><span class="p">:</span> <span class="kt">SXNodeState</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//...</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">search</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>
        <span class="c1">//...</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">pathWithState</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">SXNodeState</span><span class="p">]</span> <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>

    <span class="c1">//MARK: private</span>

    <span class="kd">private</span> <span class="k">var</span> <span class="nv">pathStates</span> <span class="o">=</span> <span class="p">[</span><span class="kt">SXNodeState</span><span class="p">]()</span>

    <span class="kd">private</span> <span class="k">var</span> <span class="nv">historyIdentifier</span> <span class="o">=</span> <span class="kt">Set</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span><span class="p">()</span>

    <span class="kd">private</span> <span class="k">var</span> <span class="nv">succcesState</span><span class="p">:</span> <span class="kt">SXNodeState</span><span class="p">?</span>

    <span class="kd">private</span> <span class="kd">func</span> <span class="nf">getChild</span><span class="p">(</span><span class="nv">state</span><span class="p">:</span> <span class="kt">SXNodeState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">SXNodeState</span><span class="p">]</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">child</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="nf">childeStates</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">child</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="å…³äºæ¯”ç‰¹ä½">å…³äºæ¯”ç‰¹ä½</h3>

<p>å½“çŠ¶æ€å¯ä»¥ä½¿ç”¨ä¸€ä¸ª <strong>64ä½Int å‹</strong> è¡¨ç¤ºçš„æ—¶å€™ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨äºŒè¿›åˆ¶ä½æ¥è®°å½•å½“å‰ Identifierï¼Œè¿™ä¼šå¤§å¹…æå‡ç®—æ³•é€Ÿåº¦ã€‚</p>

<p>ä¹Ÿå¯ä»¥è€ƒè™‘ <strong>ç›´æ¥ä½¿ç”¨ Int64 åŒæ—¶ä½œä¸º data å’Œ Identifier</strong></p>

<p>é‚£ä¹ˆå…³äºäºŒè¿›åˆ¶ä½çš„è¿ç®—å°±è¦äº†è§£ä¸€ä¸‹äº†ï¼š</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
</pre></td><td class="rouge-code"><pre><span class="kd">extension</span> <span class="kt">Int64</span> <span class="p">{</span>
    <span class="c1">// å–ç©ºæ ¼ä½ç½®</span>
    <span class="kd">func</span> <span class="nf">space1Index</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Int64</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">self</span> <span class="o">&amp;</span> <span class="mb">0b11111</span>
    <span class="p">}</span>
    <span class="kd">func</span> <span class="nf">space0Index</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Int64</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">self</span> <span class="o">&gt;&gt;</span> <span class="mi">5</span> <span class="o">&amp;</span> <span class="mb">0b11111</span>
    <span class="p">}</span>
    <span class="c1">// å–æŸä½çš„å€¼</span>
    <span class="kd">func</span> <span class="nf">valueAtByte</span><span class="p">(</span><span class="nv">index</span><span class="p">:</span> <span class="kt">Int64</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Int64</span> <span class="p">{</span>
        <span class="nf">return</span> <span class="p">(</span><span class="k">self</span> <span class="o">&gt;&gt;</span> <span class="mi">10</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="p">(</span><span class="mi">40</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">index</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mb">0b11</span>
    <span class="p">}</span>
    <span class="c1">// æ ¹æ®ä¸€ä¸ª identifier æ¨å‡ºå¦ä¸€ä¸ª identifier</span>
    <span class="kd">func</span> <span class="nf">mapToAnotherIdentifier</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Int64</span> <span class="p">{</span>
        <span class="kd">func</span> <span class="nf">exchange</span><span class="p">(</span><span class="nv">value</span><span class="p">:</span> <span class="kt">Int64</span><span class="p">,</span> <span class="nv">length</span><span class="p">:</span> <span class="kt">Int64</span> <span class="o">=</span> <span class="mi">8</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Int64</span> <span class="p">{</span>
            <span class="k">var</span> <span class="nv">left</span> <span class="o">=</span> <span class="n">value</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span>
            <span class="k">var</span> <span class="nv">right</span> <span class="o">=</span> <span class="n">value</span> <span class="o">&amp;</span> <span class="mb">0b1111</span>
            <span class="n">left</span> <span class="o">=</span> <span class="p">(</span><span class="n">value</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">value</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">)</span>
            <span class="n">right</span> <span class="o">=</span> <span class="p">(</span><span class="n">right</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">right</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">)</span>
            <span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="p">(</span><span class="n">left</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="n">right</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="p">}</span>
        <span class="k">let</span> <span class="nv">base</span> <span class="o">=</span> <span class="k">self</span> <span class="o">&gt;&gt;</span> <span class="mi">10</span>

        <span class="k">var</span> <span class="nv">first</span> <span class="o">=</span> <span class="n">base</span> <span class="o">&gt;&gt;</span> <span class="mi">16</span>
        <span class="k">var</span> <span class="nv">second</span> <span class="o">=</span> <span class="n">base</span> <span class="o">&gt;&gt;</span> <span class="mi">12</span> <span class="o">&amp;</span> <span class="mb">0b11111111</span>
        <span class="k">var</span> <span class="nv">third</span> <span class="o">=</span> <span class="n">base</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span> <span class="o">&amp;</span> <span class="mb">0b11111111</span>
        <span class="k">var</span> <span class="nv">fourth</span> <span class="o">=</span> <span class="n">base</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span> <span class="o">&amp;</span> <span class="mb">0b11111111</span>
        <span class="k">var</span> <span class="nv">fifth</span> <span class="o">=</span> <span class="n">base</span> <span class="o">&amp;</span> <span class="mb">0b11111111</span>

        <span class="n">first</span> <span class="o">=</span> <span class="nf">exchange</span><span class="p">(</span><span class="nv">value</span><span class="p">:</span> <span class="n">first</span><span class="p">)</span>
        <span class="n">second</span> <span class="o">=</span> <span class="nf">exchange</span><span class="p">(</span><span class="nv">value</span><span class="p">:</span> <span class="n">second</span><span class="p">)</span>
        <span class="n">third</span> <span class="o">=</span> <span class="nf">exchange</span><span class="p">(</span><span class="nv">value</span><span class="p">:</span> <span class="n">third</span><span class="p">)</span>
        <span class="n">fourth</span> <span class="o">=</span> <span class="nf">exchange</span><span class="p">(</span><span class="nv">value</span><span class="p">:</span> <span class="n">fourth</span><span class="p">)</span>
        <span class="n">fifth</span> <span class="o">=</span> <span class="nf">exchange</span><span class="p">(</span><span class="nv">value</span><span class="p">:</span> <span class="n">fifth</span><span class="p">)</span>

        <span class="k">var</span> <span class="nv">result</span> <span class="o">=</span> <span class="p">(</span><span class="n">first</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">second</span> <span class="o">&lt;&lt;</span> <span class="mi">12</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">third</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">fourth</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="n">fifth</span>

        <span class="k">let</span> <span class="nv">space0</span> <span class="o">=</span> <span class="nf">space0Index</span><span class="p">()</span>
        <span class="k">let</span> <span class="nv">space1</span> <span class="o">=</span> <span class="nf">space1Index</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">&amp;&lt;&lt;=</span> <span class="mi">5</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="kt">Int64</span><span class="p">(</span><span class="kt">Int64</span><span class="p">(</span><span class="n">space0</span> <span class="o">/</span> <span class="mi">4</span><span class="p">)</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">+</span> <span class="p">(</span><span class="mi">3</span> <span class="o">-</span> <span class="n">space0</span> <span class="o">%</span> <span class="mi">4</span><span class="p">))</span>
        <span class="n">result</span> <span class="o">&amp;&lt;&lt;=</span> <span class="mi">5</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="kt">Int64</span><span class="p">(</span><span class="kt">Int64</span><span class="p">(</span><span class="n">space1</span> <span class="o">/</span> <span class="mi">4</span><span class="p">)</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">+</span> <span class="p">(</span><span class="mi">3</span> <span class="o">-</span> <span class="n">space1</span> <span class="o">%</span> <span class="mi">4</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">result</span>
    <span class="p">}</span>
    <span class="c1">// ç”¨äºäº¤æ¢æŸä¸¤ä¸ªæ¯”ç‰¹ä½çš„å€¼</span>
    <span class="k">mutating</span> <span class="kd">func</span> <span class="nf">exchangeByte</span><span class="p">(</span><span class="nv">from</span><span class="p">:</span> <span class="kt">Int64</span><span class="p">,</span> <span class="nv">to</span><span class="p">:</span> <span class="kt">Int64</span><span class="p">,</span> <span class="nv">isSpace0</span><span class="p">:</span> <span class="kt">Bool</span> <span class="o">=</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">func</span> <span class="nf">exchange</span><span class="p">(</span><span class="nv">value</span><span class="p">:</span> <span class="kt">Int64</span><span class="p">,</span> <span class="nv">length</span><span class="p">:</span> <span class="kt">Int64</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="kt">Int64</span><span class="p">,</span> <span class="nv">to</span><span class="p">:</span> <span class="kt">Int64</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Int64</span> <span class="p">{</span>
            <span class="k">let</span> <span class="nv">value0</span> <span class="o">=</span> <span class="n">value</span> <span class="o">&gt;&gt;</span> <span class="p">(</span><span class="n">length</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">from</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mb">0b11</span>
            <span class="k">let</span> <span class="nv">value1</span> <span class="o">=</span> <span class="n">value</span> <span class="o">&gt;&gt;</span> <span class="p">(</span><span class="n">length</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">to</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mb">0b11</span>
            <span class="k">let</span> <span class="nv">set0</span> <span class="o">=</span> <span class="n">value</span> <span class="o">&amp;</span> <span class="o">~</span><span class="p">(</span><span class="mb">0b11</span> <span class="o">&lt;&lt;</span> <span class="p">((</span><span class="n">length</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">from</span><span class="p">)))</span> <span class="o">&amp;</span> <span class="o">~</span><span class="p">(</span><span class="mb">0b11</span> <span class="o">&lt;&lt;</span> <span class="p">((</span><span class="n">length</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">to</span><span class="p">)))</span>
            <span class="k">let</span> <span class="nv">valueNew0</span> <span class="o">=</span> <span class="n">value1</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">length</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">from</span><span class="p">)</span>
            <span class="k">let</span> <span class="nv">valueNew1</span> <span class="o">=</span> <span class="n">value0</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">length</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">to</span><span class="p">)</span>
            <span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="n">set0</span> <span class="o">+</span> <span class="n">valueNew0</span> <span class="o">+</span> <span class="n">valueNew1</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="p">}</span>

        <span class="k">let</span> <span class="nv">exchangePrefix</span> <span class="o">=</span> <span class="nf">exchange</span><span class="p">(</span><span class="nv">value</span><span class="p">:</span> <span class="k">self</span> <span class="o">&gt;&gt;</span> <span class="mi">10</span><span class="p">,</span> <span class="nv">length</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="n">from</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nv">to</span><span class="p">:</span> <span class="n">to</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

        <span class="k">let</span> <span class="nv">suffix</span><span class="p">:</span> <span class="kt">Int64</span>
        <span class="k">if</span> <span class="n">isSpace0</span> <span class="p">{</span>
            <span class="n">suffix</span> <span class="o">=</span> <span class="k">self</span> <span class="o">&amp;</span> <span class="mb">0b00000000000000000000000000000000000000001111100000</span> <span class="o">+</span> <span class="n">to</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">suffix</span> <span class="o">=</span> <span class="k">self</span> <span class="o">&amp;</span> <span class="mb">0b00000000000000000000000000000000000000000000011111</span> <span class="o">+</span> <span class="n">to</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span>
        <span class="p">}</span>
        <span class="k">self</span> <span class="o">=</span> <span class="n">exchangePrefix</span> <span class="o">&lt;&lt;</span> <span class="mi">10</span> <span class="o">+</span> <span class="n">suffix</span>
    <span class="p">}</span>
<span class="p">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="ä¼˜åŒ–">ä¼˜åŒ–</h3>

<p>é¡¹ç›®åˆ†3ä¸ªåˆ†æ”¯ï¼Œéƒ½æ˜¯ä½¿ç”¨äº†å¹¿åº¦ä¼˜å…ˆç®—æ³•è¿›è¡Œéå†è®¡ç®—ï¼ŒåŒºåˆ«åœ¨äºç”¨äºå­˜å‚¨çš„èŠ‚ç‚¹ä½¿ç”¨çš„æ•°æ®ç±»å‹ä¸ä¸€æ ·</p>

<ul>
  <li><strong>masterï¼š é‡‡ç”¨å­—ç¬¦ä¸²ä½œä¸ºæ ‡è¯†è®°å½•å’Œå­˜å‚¨èŠ‚ç‚¹</strong></li>
</ul>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="kd">protocol</span> <span class="kt">SXNodeState</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">parentState</span><span class="p">:</span> <span class="kt">SXNodeState</span><span class="p">?</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="k">var</span> <span class="nv">data</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span><span class="p">]</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="k">var</span> <span class="nv">identifier</span><span class="p">:</span> <span class="kt">String</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">childeStates</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">SXNodeState</span><span class="p">]</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li><strong>Previewï¼š ä½¿ç”¨[Int]è®°å½•æ•°æ®ï¼Œä½¿ç”¨ Int64 è®°å½•çŠ¶æ€ï¼ŒåŒºåˆ†é‡å¤</strong></li>
</ul>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="kd">protocol</span> <span class="kt">SXNodeState</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">parentState</span><span class="p">:</span> <span class="kt">SXNodeState</span><span class="p">?</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="k">var</span> <span class="nv">data</span><span class="p">:</span> <span class="p">[</span><span class="kt">Int</span><span class="p">]</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="k">var</span> <span class="nv">identifier</span><span class="p">:</span> <span class="kt">Int64</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">childeStates</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">SXNodeState</span><span class="p">]</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li><strong>Ultimateï¼š åªä½¿ç”¨äº† Int64 è®°å½•å½“å‰çŠ¶æ€ï¼Œå¹¶ä¸”ä½œä¸ºå”¯ä¸€æ ‡è¯†</strong></li>
</ul>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="kd">protocol</span> <span class="kt">SXNodeState</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">parentState</span><span class="p">:</span> <span class="kt">SXNodeState</span><span class="p">?</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="k">var</span> <span class="nv">identifier</span><span class="p">:</span> <span class="kt">Int64</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">childeStates</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">SXNodeState</span><span class="p">]</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="å…³äº-ultimate">å…³äº Ultimate</h4>

<p>é€šè¿‡ 0ï¼ˆæ›¹æ“ï¼‰ 1ï¼ˆæ¨ªå°†ï¼‰ 2ï¼ˆçºµå°†ï¼‰ 3ï¼ˆå•ä¸ªï¼‰æ¥ä½¿ç”¨äºŒè¿›åˆ¶ä½è®°å½•å½“å‰çŠ¶æ€ï¼Œåœ¨åˆ†åˆ«ä½¿ç”¨ä¸¤ä¸ª5ä½çš„æ•°æ®ç”¨æ¥è¡¨ç¤ºä¸¤ä¸ªç©ºæ ¼çš„ä½ç½®</p>

<p>ä¾‹å¦‚å¦‚ä¸‹å¸ƒå±€çš„è¡¨ç¤ºä¸ºï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre></td><td class="rouge-code"><pre>å’å’å¼ èµµ
å…³å…³å¼ èµµ
æ›¹æ›¹é©¬é©¬
æ›¹æ›¹é»„é»„
å’å’ã€‡ã€‡

-------åè¿›åˆ¶å¦‚ä¸‹----------
3322
1122
0011
0011
3333

å…¶ç©ºæ ¼åˆ†åˆ«ä¸º18ï¼Œ19
--------äºŒè¿›åˆ¶å³æ˜¯---------
11 11 10 10
01 01 10 10
00 00 01 01
00 00 01 01
11 11 11 11

å…¶ç©ºæ ¼åˆ†åˆ«ä¸º10010ï¼Œ10011
--------æ‰€ä»¥å…¶æœ€ç»ˆ id ä¸º 50 ä½çš„äºŒè¿›åˆ¶æ•°---------

let identifier: Int64 = 0b11111010010110100000010100000101111111111001010011

</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="å…³äºæ•ˆç‡">å…³äºæ•ˆç‡</h4>

<ol>
  <li>æ— ç–‘æœ€æ…¢</li>
  <li>ä½¿ç”¨ Set<Int64> è®°å½•å†å²ä¹‹åå¿«äº†å¾ˆå¤šï¼Œå¾—ç›Šäº **swift æ•°ç»„çš„æ€§èƒ½**ï¼Œè¿ç®—é€Ÿåº¦æ¯”è¾ƒå¿«å¿«çš„</Int64></li>
  <li>identifier å³æ•°æ®ï¼Œå†…å­˜å ç”¨å¤§å¤§ä¼˜åŒ–ï¼›è™½ç„¶ä½è¿ç®—é€Ÿåº¦å¿«å¾ˆå¤šï¼Œä½†æ˜¯å¤§é‡çš„ä½ç§»å’Œåˆ¤æ–­å¯¹æ€§èƒ½æœ‰å½±å“</li>
</ol>

<h4 id="æ›´è¿›ä¸€æ­¥çš„ä¼˜åŒ–">æ›´è¿›ä¸€æ­¥çš„ä¼˜åŒ–</h4>

<p><strong>è¿™éƒ¨åˆ†ä¸å‡†å¤‡åœ¨è¿™ä¸ªé¡¹ç›®ç»§ç»­æ›´æ–°äº†</strong></p>

<ol>
  <li><strong>å¢åŠ æƒé‡</strong></li>
</ol>

<p>é‰´äºåå®¹é“çš„ç‰¹æ®Šæ€§ï¼Œå…¶æœ€ç»ˆçŠ¶æ€æ˜¯ä¸ç¡®å®šçš„ï¼ˆåªè¦æ›¹æ“èµ°åˆ°ä¸‹éƒ¨æœ€ä¸­é—´å³å¯ï¼‰ï¼Œæ‰€ä»¥è®¡ç®—æ¥è¿‘äºæœ€ç»ˆçŠ¶æ€çš„äº‹æƒ…å˜å¾—å¤æ‚äº†</p>

<p><strong>å¦‚æœéè¦ä½¿ç”¨ä¹Ÿä¸æ˜¯ä¸å¯ä»¥</strong> ï¼š åå®¹é“ç°åœ¨æœ‰ 400 å¤šç§åˆå§‹å¸ƒå±€ï¼Œå¯¹åº”çš„æœ‰400å¤šç§æœ€ç»ˆå¸ƒå±€ï¼Œåˆ†åˆ«è®°å½•å¹¶å¢åŠ æƒé‡å³å¯ã€‚</p>

<p>æœ¬é¡¹ç›®åªæ˜¯ç ”ç©¶äº†ä¸€ç§å¸ƒå±€ï¼Œç†è®ºä¸Šå¯ä»¥æ·»åŠ ä¸€ä¸ªæœ€ç»ˆå¸ƒå±€ï¼Œå¢åŠ æƒé‡</p>

<p><strong>è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œåå®¹é“æœ‰å¾ˆå¤šç±»ä¼¼é‡å¤çš„æ¥å›èµ°åŠ¨ï¼Œä¸ºäº†å°†ä¸€äº›å­äº¤æ¢ä½ç½®ï¼Œæ‰€ä»¥åŠ æƒçš„æ•ˆæœæ˜¯æœ‰é™çš„</strong></p>

<ol>
  <li><strong>æœ€å¿«è§£æ³•</strong></li>
</ol>

<p><strong>ä¸Šä¸€æ¡è¯´è¿‡</strong> ï¼šåå®¹é“æœ‰æœ‰é™çš„å¸ƒå±€</p>

<p><strong>å¹¶ä¸”åå®¹é“æ˜¯æœ‰ ä¸€æ¨ªï¼ŒäºŒæ¨ªï¼Œä¸‰æ¨ªï¼Œå››æ¨ªç­‰ä¸åŒçš„è§£æ³•æ­¥éª¤</strong></p>

<p>æ‰€ä»¥å¦‚åŒé­”æ–¹ä¸€æ ·ï¼Œä¸€å®šæœ‰ä¸€äº›æœ‰é™çš„ä¸­é—´å¸ƒå±€ï¼Œåªéœ€è¦ä»åˆå§‹è½¬æ¢ä¸ºä¸­é—´å¸ƒå±€ï¼Œå³å¯æ ¹æ®æ—¢å®šæ­¥éª¤æ±‚å‡ºè§£ã€‚</p>

<ol>
  <li><strong>ç»“åˆèµ„æ–™å’Œç®—æ³•</strong></li>
</ol>

<p>å¹¿åº¦ä¼˜å…ˆæ±‚è§£ 15 æ­¥ä»¥å†…åœ¨ 0.5 ç§’ä»¥å†…ï¼Œå¦‚æœå†åŠ ä¸ŠåŠ æƒï¼Œ0.5ç§’èƒ½è§£å‡ºæ›´å¤šçš„æ­¥éª¤ã€‚</p>

<p>æœ€ç®€å•çš„æ–¹å¼åº”è¯¥æ˜¯ä¸‹è¾¹çš„æ ·å­</p>

<p><strong>åˆ©ç”¨ä¸€ä¸ªä¸ªå…³é”®ç‚¹ï¼ˆæœ¨æ¡©ï¼‰çš„è®°å½•ï¼Œä½¿ç”¨æœç´¢ï¼ˆè·³ï¼‰æ±‚è§£</strong></p>

<h3 id="æ€»ç»“">æ€»ç»“</h3>

<p><strong>åå®¹é“</strong> æ¯”æ™®é€šçš„ <strong>ä¹å®«æ ¼æ‹¼å›¾</strong> æ±‚è§£æ›´åŠ å¤æ‚ã€‚å› ä¸ºä¸ç¡®å®šæœ€ç»ˆçŠ¶æ€ï¼Œæ‰€ä»¥A*æ²¡æ³•å‘æŒ¥å¨åŠ›ï¼›å› ä¸ºå­˜åœ¨å¤šç§åˆå§‹å¸ƒå±€ï¼Œä¸”å¯¹åº”å¤šç§æœ€ç»ˆå¸ƒå±€ï¼Œæ‰€ä»¥è®©æ™®é€šæœç´¢æ±‚è§£æ— èƒ½ä¸ºåŠ›ã€‚ä½†æ˜¯ï¼ˆä¸‹è¾¹æ¢ä¸€æ®µï¼‰â€¦</p>

<p><strong>åƒé­”æ–¹ç®—æ³•ä¸€æ ·ï¼Œè™½ç„¶ä¸­é—´è¿‡ç¨‹éå¸¸å¤æ‚ï¼Œä½†æ˜¯é€šè¿‡æœ‰é™çš„ä¸­é—´çŠ¶æ€è½¬æ¢ï¼Œä¾ç„¶å¯ä»¥åœ¨ç§’çº§ç®—å‡ºæ­£ç¡®è§£æ³•</strong>ã€‚</p>

<p>å› ä¸ºä½¿ç”¨äº†åˆ†æ”¯æ¥åŒºåˆ†ä»£ç ï¼Œæ‰€ä»¥ä¸æ–¹ä¾¿æ”¾å…¥ BlogDemoï¼Œæ„Ÿå…´è¶£å¯ä»¥åˆ°è¿™é‡ŒæŸ¥çœ‹
<strong>é¡¹ç›®åœ°å€ï¼š<a href="https://gitee.com/poos/HuaRongDao">ShownBie/HuaRongDaoSwift</a></strong></p>
:ET